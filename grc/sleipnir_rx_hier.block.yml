id: sleipnir_rx_hier
label: Sleipnir RX Hierarchical Block
category: '[gr-sleipnir]'

parameters:
- id: local_callsign
  label: Local Callsign
  dtype: string
  default: '"N0CALL"'
  hide: none

- id: audio_samp_rate
  label: Audio Sample Rate (Hz)
  dtype: float
  default: '8000.0'
  hide: none

- id: rf_samp_rate
  label: RF Sample Rate (Hz)
  dtype: float
  default: '48000.0'
  hide: none

- id: symbol_rate
  label: Symbol Rate (symbols/sec)
  dtype: float
  default: '4800.0'
  hide: none

- id: fsk_deviation
  label: FSK Deviation (Hz)
  dtype: float
  default: '2400.0'
  hide: none

- id: fsk_levels
  label: FSK Levels
  dtype: int
  default: '4'
  options: [4, 8]
  hide: none

- id: auth_matrix_file
  label: Auth LDPC Matrix File
  dtype: file_open
  default: '"../ldpc_matrices/ldpc_auth_768_256.alist"'
  hide: none

- id: voice_matrix_file
  label: Voice LDPC Matrix File
  dtype: file_open
  default: '"../ldpc_matrices/ldpc_voice_576_384.alist"'
  hide: none

- id: private_key_path
  label: Private Key Path
  dtype: file_open
  default: 'None'
  hide: part

- id: require_signatures
  label: Require Signatures
  dtype: bool
  default: 'False'
  hide: none

- id: public_key_store_path
  label: Public Key Store Path
  dtype: file_open
  default: 'None'
  hide: part

templates:
  imports: |-
    from gnuradio import sleipnir
  make: |-
    sleipnir.make_sleipnir_rx_hier(
        local_callsign=${local_callsign},
        audio_samp_rate=${audio_samp_rate},
        rf_samp_rate=${rf_samp_rate},
        symbol_rate=${symbol_rate},
        fsk_deviation=${fsk_deviation},
        fsk_levels=${fsk_levels},
        auth_matrix_file=${auth_matrix_file},
        voice_matrix_file=${voice_matrix_file},
        private_key_path=${private_key_path},
        require_signatures=${require_signatures},
        public_key_store_path=${public_key_store_path}
    )

inputs:
- domain: stream
  dtype: complex
  vlen: 1
  name: rf_in

outputs:
- domain: stream
  dtype: float
  vlen: 1
  name: audio_out

file_format: 1

